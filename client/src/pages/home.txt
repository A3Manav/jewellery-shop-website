import React, { useState, useEffect } from 'react';
import { useQuery } from "@tanstack/react-query";
import axios from 'axios';
import { ChevronLeft, ChevronRight, Heart, Eye, ShoppingCart, Star, Award, Shield, Gem } from 'lucide-react';

function Home() {
    const [currentSlide, setCurrentSlide] = useState(0);

    // Fetch categories from API
    const { data: categories, isLoading: categoriesLoading } = useQuery({
        queryKey: ['categories'],
        queryFn: () => axios.get('/api/categories').then(res => res.data)
    });

    // Fetch trending products from API
    const { data: products, isLoading: productsLoading } = useQuery({
        queryKey: ['products'],
        queryFn: () => axios.get('/api/products?trending=true').then(res => res.data)
    });

    // Hero video carousel backgrounds
    const heroSlides = [
        {
            title: "Timeless Elegance",
            subtitle: "Discover jewelry that transcends generations",
            cta: "Explore Collection"
        },
        {
            title: "Artisan Craftsmanship",
            subtitle: "Each piece tells a story of exceptional skill",
            cta: "View Artisan Stories"
        },
        {
            title: "Certified Excellence",
            subtitle: "Premium diamonds with international certification",
            cta: "Learn More"
        }
    ];

    useEffect(() => {
        const interval = setInterval(() => {
            setCurrentSlide((prev) => (prev + 1) % heroSlides.length);
        }, 5000);
        return () => clearInterval(interval);
    }, []);

    const nextSlide = () => {
        setCurrentSlide((prev) => (prev + 1) % heroSlides.length);
    };

    const prevSlide = () => {
        setCurrentSlide((prev) => (prev - 1 + heroSlides.length) % heroSlides.length);
    };

    return (
        <div className="min-h-screen bg-black text-white">
            {/* Hero Section with Video Background */}
            <div className="relative h-screen overflow-hidden">
                {/* Video Background */}
                <div className="absolute inset-0 z-0">
                    <video
                        autoPlay
                        muted
                        loop
                        playsInline
                        className="w-full h-full object-cover filter grayscale opacity-60"
                    >
                        <source src="https://videos.pexels.com/video-files/6053816/6053816-uhd_2560_1440_30fps.mp4" type="video/mp4" />
                    </video>
                </div>

                {/* Overlay */}
                <div className="absolute inset-0 bg-gradient-to-b from-black/70 via-black/50 to-black/80 z-10"></div>

                {/* Hero Content */}
                <div className="relative z-20 h-full flex items-center justify-center">
                    <div className="text-center max-w-4xl mx-auto px-4">
                        <div className="mb-8">
                            <h1 className="text-6xl md:text-8xl font-light mb-6 tracking-wider">
                                {heroSlides[currentSlide].title}
                            </h1>
                            <p className="text-xl md:text-2xl text-gray-300 mb-8 font-light">
                                {heroSlides[currentSlide].subtitle}
                            </p>
                            <button className="bg-white text-black px-8 py-4 text-lg font-medium hover:bg-gray-200 transition-all duration-300 transform hover:scale-105">
                                {heroSlides[currentSlide].cta}
                            </button>
                        </div>
                    </div>
                </div>

                {/* Navigation Arrows */}
                <button
                    onClick={prevSlide}
                    className="absolute left-8 top-1/2 transform -translate-y-1/2 z-30 bg-white/20 hover:bg-white/30 p-3 rounded-full transition-all duration-300"
                >
                    <ChevronLeft className="w-6 h-6" />
                </button>
                <button
                    onClick={nextSlide}
                    className="absolute right-8 top-1/2 transform -translate-y-1/2 z-30 bg-white/20 hover:bg-white/30 p-3 rounded-full transition-all duration-300"
                >
                    <ChevronRight className="w-6 h-6" />
                </button>

                {/* Slide Indicators */}
                <div className="absolute bottom-8 left-1/2 transform -translate-x-1/2 z-30 flex space-x-2">
                    {heroSlides.map((_, index) => (
                        <button
                            key={index}
                            onClick={() => setCurrentSlide(index)}
                            className={`w-3 h-3 rounded-full transition-all duration-300 ${index === currentSlide ? 'bg-white' : 'bg-white/50'
                                }`}
                        />
                    ))}
                </div>
            </div>

            {/* Categories Section */}
            <div className="bg-gradient-to-b from-black to-gray-900 py-20">
                <div className="container mx-auto px-4">
                    <div className="text-center mb-16">
                        <h2 className="text-5xl font-light mb-6 tracking-wide">Our Collections</h2>
                        <p className="text-xl text-gray-400 max-w-3xl mx-auto">
                            Curated collections that represent the pinnacle of jewelry craftsmanship,
                            each piece selected for its exceptional beauty and quality.
                        </p>
                    </div>

                    {categoriesLoading ? (
                        <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8">
                            {[...Array(6)].map((_, index) => (
                                <div key={index} className="bg-gray-800 rounded-lg animate-pulse">
                                    <div className="h-80 bg-gray-700 rounded-t-lg"></div>
                                    <div className="p-6">
                                        <div className="h-6 bg-gray-700 rounded mb-2"></div>
                                        <div className="h-4 bg-gray-700 rounded mb-3 w-3/4"></div>
                                        <div className="h-3 bg-gray-700 rounded w-1/2"></div>
                                    </div>
                                </div>
                            ))}
                        </div>
                    ) : (
                        <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8">
                            {categories?.map((category) => (
                                <div
                                    key={category._id || category.id}
                                    className="group relative overflow-hidden bg-gray-900 rounded-lg hover:transform hover:scale-105 transition-all duration-500 cursor-pointer"
                                >
                                    <div className="relative overflow-hidden">
                                        <img
                                            src={category.image || "https://images.unsplash.com/photo-1605100804763-247f67b3557e?w=600&h=400&fit=crop&crop=center"}
                                            alt={category.name}
                                            className="w-full h-80 object-cover group-hover:scale-110 transition-transform duration-700"
                                            onError={(e) => {
                                                e.target.src = "https://images.unsplash.com/photo-1605100804763-247f67b3557e?w=600&h=400&fit=crop&crop=center";
                                            }}
                                        />
                                        <div className="absolute inset-0 bg-gradient-to-t from-black/80 via-black/20 to-transparent"></div>
                                    </div>

                                    <div className="absolute bottom-0 left-0 right-0 p-6">
                                        <h3 className="text-2xl font-medium mb-2">{category.name}</h3>
                                        <p className="text-gray-300 text-sm mb-3 leading-relaxed">
                                            {category.description || "Discover our exquisite collection of premium jewelry pieces"}
                                        </p>
                                        <div className="flex justify-between items-center">
                                            <span className="text-xs text-gray-400">
                                                {category.productCount ? `${category.productCount} items` : "Explore collection"}
                                            </span>
                                            <div className="bg-white text-black px-4 py-2 text-sm font-medium opacity-0 group-hover:opacity-100 transition-opacity duration-300">
                                                Explore â†’
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            ))}
                        </div>
                    )}
                </div>
            </div>

            {/* Featured Products Section */}
            <div className="bg-gray-900 py-20">
                <div className="container mx-auto px-4">
                    <div className="text-center mb-16">
                        <h2 className="text-5xl font-light mb-6 tracking-wide">Featured Masterpieces</h2>
                        <p className="text-xl text-gray-400 max-w-3xl mx-auto">
                            Handpicked selections from our master artisans, representing the finest in contemporary luxury jewelry.
                        </p>
                    </div>

                    {productsLoading ? (
                        <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-8">
                            {[...Array(4)].map((_, index) => (
                                <div key={index} className="bg-gray-800 rounded-lg overflow-hidden animate-pulse">
                                    <div className="h-80 bg-gray-700"></div>
                                    <div className="p-6">
                                        <div className="h-4 bg-gray-700 rounded mb-3 w-3/4"></div>
                                        <div className="h-6 bg-gray-700 rounded mb-3"></div>
                                        <div className="h-4 bg-gray-700 rounded mb-4 w-full"></div>
                                        <div className="h-4 bg-gray-700 rounded mb-4 w-2/3"></div>
                                        <div className="h-12 bg-gray-700 rounded"></div>
                                    </div>
                                </div>
                            ))}
                        </div>
                    ) : (
                        <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-8">
                            {products?.map((product) => (
                                <div
                                    key={product._id || product.id}
                                    className="group bg-black rounded-lg overflow-hidden hover:transform hover:scale-105 transition-all duration-500"
                                >
                                    <div className="relative overflow-hidden">
                                        <img
                                            src={product.image || product.images?.[0] || "https://images.unsplash.com/photo-1605100804763-247f67b3557e?w=500&h=500&fit=crop&crop=center"}
                                            alt={product.name}
                                            className="w-full h-80 object-cover group-hover:scale-110 transition-transform duration-700"
                                            onError={(e) => {
                                                e.target.src = "https://images.unsplash.com/photo-1605100804763-247f67b3557e?w=500&h=500&fit=crop&crop=center";
                                            }}
                                        />

                                        {/* Badge */}
                                        {(product.badge || product.isNew || product.isBestseller) && (
                                            <div className="absolute top-4 left-4 bg-white text-black px-3 py-1 text-xs font-medium">
                                                {product.badge || (product.isNew ? "New Arrival" : product.isBestseller ? "Bestseller" : "Featured")}
                                            </div>
                                        )}

                                        {/* Action Buttons */}
                                        <div className="absolute top-4 right-4 flex flex-col gap-2 opacity-0 group-hover:opacity-100 transition-opacity duration-300">
                                            <button className="bg-white/90 text-black p-2 rounded-full hover:bg-white transition-colors">
                                                <Heart className="w-4 h-4" />
                                            </button>
                                            <button className="bg-white/90 text-black p-2 rounded-full hover:bg-white transition-colors">
                                                <Eye className="w-4 h-4" />
                                            </button>
                                        </div>
                                    </div>

                                    <div className="p-6">
                                        {/* Rating */}
                                        <div className="flex items-center gap-1 mb-3">
                                            {[...Array(5)].map((_, i) => (
                                                <Star
                                                    key={i}
                                                    className={`w-4 h-4 ${i < Math.floor(product.rating || 4.5)
                                                        ? 'text-yellow-400 fill-current'
                                                        : 'text-gray-600'
                                                        }`}
                                                />
                                            ))}
                                            <span className="text-gray-400 text-sm ml-2">
                                                {product.rating || "4.5"} ({product.reviews || product.reviewCount || "50+"})
                                            </span>
                                        </div>

                                        <h3 className="text-lg font-medium mb-3 leading-tight">
                                            {product.name}
                                        </h3>

                                        <p className="text-gray-400 text-sm mb-4 leading-relaxed line-clamp-3">
                                            {product.description || "Exquisite handcrafted jewelry piece featuring premium materials and exceptional craftsmanship."}
                                        </p>

                                        <div className="flex items-center justify-between mb-4">
                                            <div>
                                                <span className="text-xl font-medium">
                                                    â‚¹{(product.price || product.salePrice || 25000).toLocaleString()}
                                                </span>
                                                {(product.originalPrice || product.regularPrice) && (
                                                    <span className="text-gray-500 text-sm line-through ml-2">
                                                        â‚¹{(product.originalPrice || product.regularPrice).toLocaleString()}
                                                    </span>
                                                )}
                                            </div>
                                        </div>

                                        <div className="flex gap-2">
                                            <button className="flex-1 bg-white text-black py-3 px-4 font-medium hover:bg-gray-200 transition-colors duration-300 flex items-center justify-center gap-2">
                                                <ShoppingCart className="w-4 h-4" />
                                                Add to Cart
                                            </button>
                                            <button className="px-4 py-3 border border-gray-600 hover:border-white transition-colors duration-300">
                                                <Heart className="w-4 h-4" />
                                            </button>
                                        </div>
                                    </div>
                                </div>
                            ))}
                        </div>
                    )}
                </div>
            </div>

            {/* Features Section */}
            <div className="bg-black py-20">
                <div className="container mx-auto px-4">
                    <div className="grid grid-cols-1 md:grid-cols-3 gap-12 text-center">
                        <div className="group">
                            <div className="mb-6">
                                <Gem className="w-12 h-12 mx-auto text-white group-hover:scale-110 transition-transform duration-300" />
                            </div>
                            <h3 className="text-xl font-medium mb-4">Certified Excellence</h3>
                            <p className="text-gray-400 leading-relaxed">
                                Every diamond comes with international certification from GIA,
                                ensuring authenticity and superior quality standards.
                            </p>
                        </div>
                        <div className="group">
                            <div className="mb-6">
                                <Award className="w-12 h-12 mx-auto text-white group-hover:scale-110 transition-transform duration-300" />
                            </div>
                            <h3 className="text-xl font-medium mb-4">Master Craftsmanship</h3>
                            <p className="text-gray-400 leading-relaxed">
                                Our artisans bring decades of experience, creating pieces that
                                represent the pinnacle of jewelry craftsmanship.
                            </p>
                        </div>
                        <div className="group">
                            <div className="mb-6">
                                <Shield className="w-12 h-12 mx-auto text-white group-hover:scale-110 transition-transform duration-300" />
                            </div>
                            <h3 className="text-xl font-medium mb-4">Lifetime Assurance</h3>
                            <p className="text-gray-400 leading-relaxed">
                                Comprehensive warranty and after-sales service ensure your
                                investment is protected for generations to come.
                            </p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    );
}
export default Home;




















import { useContext, useState } from 'react';
import { useQuery } from '@tanstack/react-query';
import { useNavigate } from 'react-router-dom';
import axios from 'axios';
import { AuthContext } from '../contexts/AuthContext';
import toast from 'react-hot-toast';

function AdminAddProduct() {
    const { user } = useContext(AuthContext);
    const navigate = useNavigate();
    const [selectedProductType, setSelectedProductType] = useState(null);
    const [formData, setFormData] = useState({
        title: '',
        price: '',
        discount: 0,
        weight: '',
        hallmarked: false,
        trending: false,
        category: '',
        description: '',
        attributes: {},
    });
    const [images, setImages] = useState([]);

    const { data: categories } = useQuery({
        queryKey: ['categories', selectedProductType],
        queryFn: () =>
            axios.get(`/api/categories?type=${selectedProductType}`).then((res) => res.data),
        enabled: !!selectedProductType,
    });

    if (user?.role !== 'admin') {
        navigate('/login');
        return null;
    }

    const productTypes = [
        {
            name: 'Jewelry',
            icon: 'ðŸ’',
            description: 'Add gold, silver, or other jewelry items',
            fields: [
                { name: 'material', label: 'Material', type: 'text', placeholder: 'e.g., Gold, Silver' },
                { name: 'gemstone', label: 'Gemstone', type: 'text', placeholder: 'e.g., Diamond, Ruby' },
            ]
        },
        {
            name: 'Pot Items',
            icon: 'ðŸ¯',
            description: 'Add pots, utensils, or kitchen items',
            fields: [
                { name: 'material', label: 'Material', type: 'text', placeholder: 'e.g., Stainless Steel, Glass' },
                { name: 'capacity', label: 'Capacity', type: 'text', placeholder: 'e.g., 500ml, 2L' },
            ]
        },
        {
            name: 'Fashion Products',
            icon: 'ðŸ‘•',
            description: 'Add clothing, accessories, or fashion items',
            fields: [
                { name: 'material', label: 'Material', type: 'text', placeholder: 'e.g., Silver, Leather' },
                { name: 'style', label: 'Style', type: 'text', placeholder: 'e.g., Modern, Traditional' },
            ]
        },
        {
            name: 'Custom Printed/Gift Items',
            icon: 'ðŸŽ',
            description: 'Add custom printed or gift items',
            fields: [
                { name: 'customization', label: 'Customization Details', type: 'text', placeholder: 'e.g., Engraved Name' },
                { name: 'occasion', label: 'Occasion', type: 'text', placeholder: 'e.g., Birthday, Anniversary' },
            ]
        }
    ];

    const handleChange = (e) => {
        const { name, value, type, checked } = e.target;
        if (name.startsWith('attributes.')) {
            const attrName = name.split('.')[1];
            setFormData((prev) => ({
                ...prev,
                attributes: { ...prev.attributes, [attrName]: value },
            }));
        } else {
            setFormData((prev) => ({
                ...prev,
                [name]: type === 'checkbox' ? checked : value,
            }));
        }
    };

    const handleImageChange = (e) => {
        setImages(e.target.files);
    };

    function generateUniqueId() {
        return 'prod_' + Math.random().toString(36).substr(2, 9) + Date.now();
    }

    const handleSubmit = async (e) => {
        e.preventDefault();
        if (selectedProductType === 'Jewelry' && !formData.weight) {
            toast.error('Weight is required for Jewelry products');
            return;
        }

        const submitData = { ...formData };
        if (!submitData.productId) submitData.productId = generateUniqueId();
        if (!submitData.type) submitData.type = selectedProductType;
        if (!submitData.category) {
            toast.error('Category is required');
            return;
        }

        const data = new FormData();
        data.append('productId', submitData.productId);
        data.append('title', submitData.title);
        data.append('price', submitData.price);
        data.append('discount', submitData.discount);
        if (submitData.weight) data.append('weight', submitData.weight);
        data.append('hallmarked', submitData.hallmarked);
        data.append('trending', submitData.trending);
        data.append('category', submitData.category);
        data.append('description', submitData.description);
        data.append('type', submitData.type);
        data.append('attributes', JSON.stringify(submitData.attributes));
        for (let i = 0; i < images.length; i++) {
            data.append('images', images[i]);
        }

        try {
            await axios.post('/api/products', data, {
                headers: {
                    Authorization: `Bearer ${localStorage.getItem('token')}`,
                    'Content-Type': 'multipart/form-data',
                },
            });
            toast.success('Product added successfully');
            navigate('/admin/manage-products');
        } catch (err) {
            toast.error('Failed to add product');
        }
    };

    const resetForm = () => {
        setSelectedProductType(null);
        setFormData({
            title: '',
            price: '',
            discount: 0,
            weight: '',
            hallmarked: false,
            trending: false,
            category: '',
            description: '',
            attributes: {},
        });
        setImages([]);
    };

    if (!selectedProductType) {
        return (
            <div className="min-h-screen bg-gray-50 py-12 px-4 sm:px-6 lg:px-8">
                <div className="max-w-7xl mx-auto">
                    <h2 className="text-3xl font-extrabold text-gray-900 mb-8 text-center">
                        Add New Product
                    </h2>
                    <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6">
                        {productTypes.map((type) => (
                            <div
                                key={type.name}
                                onClick={() => setSelectedProductType(type.name)}
                                className="bg-white p-6 rounded-lg shadow-md cursor-pointer hover:shadow-lg transition-shadow duration-300 flex flex-col items-center text-center"
                            >
                                <span className="text-4xl mb-4">{type.icon}</span>
                                <h3 className="text-xl font-semibold text-gray-800 mb-2">{type.name}</h3>
                                <p className="text-gray-600">{type.description}</p>
                            </div>
                        ))}
                    </div>
                </div>
            </div>
        );
    }

    const currentProductType = productTypes.find(type => type.name === selectedProductType);

    return (
        <div className="min-h-screen bg-gray-50 py-12 px-4 sm:px-6 lg:px-8">
            <div className="max-w-2xl mx-auto">
                <div className="flex items-center mb-6">
                    <button
                        onClick={resetForm}
                        className="mr-4 p-2 rounded-full hover:bg-gray-200"
                    >
                        <svg xmlns="http://www.w3.org/2000/svg" className="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                            <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M10 19l-7-7m0 0l7-7m-7 7h18" />
                        </svg>
                    </button>
                    <h2 className="text-3xl font-extrabold text-gray-900">
                        Add New {selectedProductType}
                    </h2>
                </div>

                <form onSubmit={handleSubmit} className="space-y-6 bg-white p-6 rounded-lg shadow-md">
                    <div>
                        <label htmlFor="title" className="block text-sm font-medium text-gray-700">
                            Product Title
                        </label>
                        <input
                            type="text"
                            id="title"
                            name="title"
                            placeholder="Product Title"
                            value={formData.title}
                            onChange={handleChange}
                            className="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500 sm:text-sm p-2"
                            required
                        />
                    </div>
                    <div>
                        <label htmlFor="price" className="block text-sm font-medium text-gray-700">
                            Price (â‚¹)
                        </label>
                        <input
                            type="number"
                            id="price"
                            name="price"
                            placeholder="Price (â‚¹)"
                            value={formData.price}
                            onChange={handleChange}
                            className="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500 sm:text-sm p-2"
                            required
                        />
                    </div>
                    <div>
                        <label htmlFor="discount" className="block text-sm font-medium text-gray-700">
                            Discount (%)
                        </label>
                        <input
                            type="number"
                            id="discount"
                            name="discount"
                            placeholder="Discount (%)"
                            value={formData.discount}
                            onChange={handleChange}
                            className="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500 sm:text-sm p-2"
                        />
                    </div>
                    {selectedProductType === 'Jewelry' && (
                        <div>
                            <label htmlFor="weight" className="block text-sm font-medium text-gray-700">
                                Weight (g)
                            </label>
                            <input
                                type="number"
                                id="weight"
                                name="weight"
                                placeholder="Weight (g)"
                                value={formData.weight}
                                onChange={handleChange}
                                className="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500 sm:text-sm p-2"
                                required
                            />
                        </div>
                    )}
                    <div className="flex gap-4">
                        <label className="flex items-center">
                            <input
                                type="checkbox"
                                name="hallmarked"
                                checked={formData.hallmarked}
                                onChange={handleChange}
                                className="mr-2 accent-blue-500"
                            />
                            Hallmarked
                        </label>
                        <label className="flex items-center">
                            <input
                                type="checkbox"
                                name="trending"
                                checked={formData.trending}
                                onChange={handleChange}
                                className="mr-2 accent-blue-500"
                            />
                            Trending
                        </label>
                    </div>
                    <div>
                        <label htmlFor="category" className="block text-sm font-medium text-gray-700">
                            Category
                        </label>
                        <select
                            id="category"
                            name="category"
                            value={formData.category}
                            onChange={handleChange}
                            className="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500 sm:text-sm p-2"
                            required
                        >
                            <option value="">Select Category</option>
                            {categories === undefined && <option disabled>Loading...</option>}
                            {Array.isArray(categories) && categories.length === 0 && (
                                <option disabled>No categories found for {selectedProductType}</option>
                            )}
                            {categories?.map((category) => (
                                <option key={category._id} value={category._id}>
                                    {category.name}
                                </option>
                            ))}
                        </select>
                    </div>
                    <div>
                        <label htmlFor="description" className="block text-sm font-medium text-gray-700">
                            Description
                        </label>
                        <textarea
                            id="description"
                            name="description"
                            placeholder="Description"
                            value={formData.description}
                            onChange={handleChange}
                            className="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500 sm:text-sm p-2"
                        />
                    </div>
                    {currentProductType.fields.map((field) => (
                        <div key={field.name}>
                            <label
                                htmlFor={`attributes.${field.name}`}
                                className="block text-sm font-medium text-gray-700"
                            >
                                {field.label}
                            </label>
                            <input
                                type={field.type}
                                id={`attributes.${field.name}`}
                                name={`attributes.${field.name}`}
                                placeholder={field.placeholder}
                                value={formData.attributes[field.name] || ''}
                                onChange={handleChange}
                                className="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500 sm:text-sm p-2"
                            />
                        </div>
                    ))}
                    <div>
                        <label htmlFor="images" className="block text-sm font-medium text-gray-700">
                            Images
                        </label>
                        <input
                            type="file"
                            id="images"
                            multiple
                            accept="image/jpeg,image/jpg,image/png"
                            onChange={handleImageChange}
                            className="mt-1 block w-full text-sm text-gray-500 file:mr-4 file:py-2 file:px-4 file:rounded-md file:border-0 file:text-sm file:font-semibold file:bg-blue-50 file:text-blue-700 hover:file:bg-blue-100"
                        />
                    </div>
                    <button
                        type="submit"
                        className="w-full flex justify-center py-2 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500"
                    >
                        Add Product
                    </button>
                </form>
            </div>
        </div>
    );
}

export default AdminAddProduct;























import React, { useState, useEffect, useMemo } from 'react';
import { useQuery } from "@tanstack/react-query";
import axios from 'axios';
import { Link, useNavigate } from 'react-router-dom';
import { ChevronLeft, ChevronRight, Heart, Eye, ShoppingCart, Award, Shield, Gem } from 'lucide-react';
import Marquee from '../components/Marquee';

function Home() {
    const [currentSlide, setCurrentSlide] = useState(0);
    const [currentVideo, setCurrentVideo] = useState(0);
    const navigate = useNavigate();

    // Array of video sources
    const videoSources = [
        "/assets/videos/akk1.mp4",
        "/assets/videos/akk2.mp4",
        "/assets/videos/akk3.mp4",
        "/assets/videos/akk4.mp4"
    ];

    // Change video every 60 seconds
    useEffect(() => {
        const interval = setInterval(() => {
            setCurrentVideo((prev) => (prev + 1) % videoSources.length);
        }, 60000); // 60,000 ms = 1 minute
        return () => clearInterval(interval);
    }, [videoSources.length]);

    // Fetch categories from API
    const { data: categories, isLoading: categoriesLoading } = useQuery({
        queryKey: ['categories'],
        queryFn: () => axios.get('/api/categories').then(res => res.data)
    });

    // Fetch trending products from API
    const { data: products, isLoading: productsLoading } = useQuery({
        queryKey: ['products'],
        queryFn: () => axios.get('/api/products?trending=true').then(res => res.data),
        staleTime: 5 * 60 * 1000,
        refetchOnWindowFocus: false,
        refetchInterval: false,
    });

    // Hero slides configuration
    const heroSlides = [
        {
            title: "Timeless Elegance",
            subtitle: "Discover jewelry that transcends generations",
            cta: "Explore Collection",
            action: () => navigate('/categories')
        },
        {
            title: "Artisan Craftsmanship",
            subtitle: "Each piece tells a story of exceptional skill",
            cta: "View Artisan Stories",
            action: () => navigate('/about')
        },
        {
            title: "Certified Excellence",
            subtitle: "Premium diamonds with international certification",
            cta: "Learn More",
            action: () => navigate('/certifications')
        }
    ];

    // Handle auto-slide
    useEffect(() => {
        const interval = setInterval(() => {
            setCurrentSlide((prev) => (prev + 1) % heroSlides.length);
        }, 5000);
        return () => clearInterval(interval);
    }, [heroSlides.length]);

    const nextSlide = () => {
        setCurrentSlide((prev) => (prev + 1) % heroSlides.length);
    };

    const prevSlide = () => {
        setCurrentSlide((prev) => (prev - 1 + heroSlides.length) % heroSlides.length);
    };

    // Handle add to cart
    const handleAddToCart = async (productId) => {
        try {
            await axios.post('/api/cart/add', { productId });
            console.log('Added to cart:', productId);
        } catch (error) {
            console.error('Error adding to cart:', error);
        }
    };

    // Handle add to wishlist
    const handleAddToWishlist = async (productId) => {
        try {
            await axios.post('/api/wishlist/add', { productId });
            console.log('Added to wishlist:', productId);
        } catch (error) {
            console.error('Error adding to wishlist:', error);
        }
    };

    // Memoized Product Grid to prevent unnecessary re-renders
    const memoizedProductGrid = useMemo(() => (
        <div className="grid grid-cols-2 md:grid-cols-3 lg:grid-cols-5 gap-4">
            {products?.map((product) => (
                <div
                    key={product._id}
                    className="group relative overflow-hidden rounded-lg shadow-sm hover:shadow-md transition-all duration-300"
                >
                    <Link to={`/product/${product._id}`}>
                        <img
                            src={product.images?.[0]?.url || "/assets/images/chudi.jpeg"}
                            alt={product.name}
                            loading="lazy"
                            className="w-full h-64 object-cover transition-transform duration-500"
                            onError={(e) => {
                                if (!e.target.src.includes("fallback-product.jpg")) {
                                    e.target.src = "/assets/images/fallback-product.jpg";
                                }
                            }}
                        />
                    </Link>
                    {/* Action Buttons */}
                    <div className="absolute top-2 right-2 flex flex-col gap-2 opacity-0 group-hover:opacity-100 transition-opacity duration-300">
                        <button
                            onClick={() => handleAddToWishlist(product._id)}
                            className="bg-black/80 text-white p-2 rounded-full hover:bg-black transition-colors"
                        >
                            <Heart className="w-4 h-4" />
                        </button>
                        <Link
                            to={`/product/${product._id}`}
                            className="bg-black/80 text-white p-2 rounded-full hover:bg-black transition-colors"
                        >
                            <Eye className="w-4 h-4" />
                        </Link>
                        <button
                            onClick={() => handleAddToCart(product._id)}
                            className="bg-black/80 text-white p-2 rounded-full hover:bg-black transition-colors"
                        >
                            <ShoppingCart className="w-4 h-4" />
                        </button>
                    </div>
                </div>
            ))}
        </div>
    ), [products]);

    return (
        <div className="min-h-screen bg-white text-black font-sans">
            {/* HERO SECTION */}
            <div className="relative h-screen overflow-hidden">
                {/* Video Background */}
                <div className="absolute inset-0 z-0 pointer-events-none">
                    <video
                        autoPlay
                        muted
                        loop
                        playsInline
                        className="w-full h-full object-cover pointer-events-none"
                        key={videoSources[currentVideo]} // ensures video restarts on change
                    >
                        <source src={videoSources[currentVideo]} type="video/mp4" />
                        Your browser does not support the video tag.
                    </video>
                </div>
                {/* Overlay */}
                <div className="absolute inset-0 bg-gradient-to-b from-black/60 via-black/40 to-black/60 z-10 pointer-events-none"></div>

                {/* Hero Content */}
                <div className="relative z-30 h-full flex items-center justify-center">
                    <div className="text-center max-w-4xl mx-auto px-4">
                        <div className="mb-8">
                            <h1 className="text-5xl md:text-7xl font-light mb-6 tracking-wide">
                                {heroSlides[currentSlide].title}
                            </h1>
                            <p className="text-lg md:text-xl text-gray-200 mb-8 font-light">
                                {heroSlides[currentSlide].subtitle}
                            </p>
                            <button
                                onClick={heroSlides[currentSlide].action}
                                className="bg-black text-white px-8 py-3 text-base font-medium hover:bg-gray-800 transition-all duration-300 shadow-md"
                            >
                                {heroSlides[currentSlide].cta}
                            </button>
                        </div>
                    </div>
                </div>

                {/* Navigation Arrows */}
                <button
                    onClick={prevSlide}
                    className="absolute left-8 top-1/2 transform -translate-y-1/2 z-50 bg-black/30 hover:bg-black/50 p-3 rounded-full transition-all duration-300"
                    style={{ pointerEvents: 'auto' }}
                    aria-label="Previous Slide"
                >
                    <ChevronLeft className="w-6 h-6 text-white" />
                </button>
                <button
                    onClick={nextSlide}
                    className="absolute right-8 top-1/2 transform -translate-y-1/2 z-50 bg-black/30 hover:bg-black/50 p-3 rounded-full transition-all duration-300"
                    style={{ pointerEvents: 'auto' }}
                    aria-label="Next Slide"
                >
                    <ChevronRight className="w-6 h-6 text-white" />
                </button>

                {/* Slide Indicators */}
                <div className="absolute bottom-8 left-1/2 transform -translate-x-1/2 z-50 flex space-x-2">
                    {heroSlides.map((_, index) => (
                        <button
                            key={index}
                            onClick={() => setCurrentSlide(index)}
                            className={`w-3 h-3 rounded-full transition-all duration-300 ${index === currentSlide ? 'bg-white' : 'bg-white/50'}`}
                            style={{ pointerEvents: 'auto' }}
                            aria-label={`Go to slide ${index + 1}`}
                        />
                    ))}
                </div>
            </div>

            <Marquee></Marquee>

            {/* Categories Section */}
            <div className="bg-white py-16">
                <div className="container mx-auto px-4">
                    <div className="text-center mb-12">
                        <h2 className="text-4xl font-light mb-4 tracking-wide">Our Collections</h2>
                        <p className="text-lg text-gray-600 max-w-3xl mx-auto">
                            Curated collections that represent the pinnacle of jewelry craftsmanship
                        </p>
                    </div>

                    {categoriesLoading ? (
                        <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
                            {[...Array(6)].map((_, index) => (
                                <div key={index} className="bg-gray-100 rounded-lg animate-pulse">
                                    <div className="h-72 bg-gray-200 rounded-t-lg"></div>
                                    <div className="p-6">
                                        <div className="h-6 bg-gray-200 rounded mb-2"></div>
                                        <div className="h-4 bg-gray-200 rounded mb-3 w-3/4"></div>
                                    </div>
                                </div>
                            ))}
                        </div>
                    ) : (
                        <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
                            {categories?.map((category) => (
                                <Link
                                    to={`/category/${category._id}`}
                                    key={category._id}
                                    className="group relative overflow-hidden bg-white rounded-lg shadow-sm hover:shadow-md transition-all duration-300"
                                >
                                    <div className="relative overflow-hidden">
                                        <img
                                            src={category.image?.url || "/assets/images/noise_ring.jpeg"}
                                            alt={category.name}
                                            className="w-full h-72 object-cover transition-transform duration-500"
                                            onError={(e) => {
                                                if (!e.target.src.includes("fallback-category.jpg")) {
                                                    e.target.src = "/assets/images/fallback-category.jpg";
                                                }
                                            }}
                                        />
                                        <div className="absolute inset-0 bg-gradient-to-t from-black/60 via-transparent to-transparent"></div>
                                    </div>

                                    <div className="absolute bottom-0 left-0 right-0 p-6">
                                        <h3 className="text-xl font-medium mb-2 text-white">{category.name}</h3>
                                        <p className="text-gray-200 text-sm mb-3 leading-relaxed">
                                            {category.description}
                                        </p>
                                        <div className="flex justify-between items-center">
                                            <span className="text-xs text-gray-300">
                                                {category.productCount} items
                                            </span>
                                            <div className="bg-black text-white px-4 py-2 text-sm font-medium opacity-0 group-hover:opacity-100 transition-opacity duration-300">
                                                Explore â†’
                                            </div>
                                        </div>
                                    </div>
                                </Link>
                            ))}
                        </div>
                    )}
                </div>
            </div>

            {/* Image-Only Products Section */}
            <div className="bg-white py-16">
                <div className="container mx-auto px-4">
                    {productsLoading ? (
                        <div className="grid grid-cols-2 md:grid-cols-3 lg:grid-cols-5 gap-4">
                            {[...Array(5)].map((_, index) => (
                                <div key={index} className="bg-gray-100 rounded-lg animate-pulse">
                                    <div className="h-64 bg-gray-200 rounded-lg"></div>
                                </div>
                            ))}
                        </div>
                    ) : (
                        memoizedProductGrid
                    )}
                </div>
            </div>

            {/* Features Section */}
            <div className="bg-white py-16">
                <div className="container mx-auto px-4">
                    <div className="grid grid-cols-1 md:grid-cols-3 gap-12 text-center">
                        <div className="group">
                            <div className="mb-6">
                                <Gem className="w-12 h-12 mx-auto text-black group-hover:scale-110 transition-transform duration-300" />
                            </div>
                            <h3 className="text-lg font-medium mb-4">Certified Excellence</h3>
                            <p className="text-gray-600 leading-relaxed">
                                Every diamond comes with international certification from GIA
                            </p>
                        </div>
                        <div className="group">
                            <div className="mb-6">
                                <Award className="w-12 h-12 mx-auto text-black group-hover:scale-110 transition-transform duration-300" />
                            </div>
                            <h3 className="text-lg font-medium mb-4">Master Craftsmanship</h3>
                            <p className="text-gray-600 leading-relaxed">
                                Our artisans bring decades of experience
                            </p>
                        </div>
                        <div className="group">
                            <div className="mb-6">
                                <Shield className="w-12 h-12 mx-auto text-black group-hover:scale-110 transition-transform duration-300" />
                            </div>
                            <h3 className="text-lg font-medium mb-4">Lifetime Assurance</h3>
                            <p className="text-gray-600 leading-relaxed">
                                Comprehensive warranty and after-sales service
                            </p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    );
}

export default Home;